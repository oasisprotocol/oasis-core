Fix runtime state pruning performance

Previously, pruning the runtime state with many local versions could
significantly slow down state synchronization.

This has been fixed by moving state pruning out of the BadgerDB
transaction responsible for pruning the runtimeâ€™s light history.
